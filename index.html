<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LOMlðŸ’–</title>
  <style>
    :root{ --bg1:#0b1220; --bg2:#102033; --card:#fff; --accent:#ff4d6d; --muted:#9aa4b2 }
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;background:linear-gradient(180deg,var(--bg1) 0%, var(--bg2) 70%);color:#eaf2ff;}
    /* Subtle animated background (soft spotlight + floating blur shapes) */
    .bg-wrap{position:fixed;inset:0;overflow:hidden;z-index:0}
    .soft-spot{position:absolute;left:50%;top:20%;width:900px;height:600px;background:radial-gradient(ellipse at center, rgba(255,80,120,0.12), rgba(6,12,20,0));filter:blur(40px);transform:translateX(-50%);animation:drift 12s ease-in-out infinite}
    .glow-orb{position:absolute;border-radius:50%;filter:blur(60px);opacity:0.7}
    .orb1{width:420px;height:420px;left:10%;top:10%;background:linear-gradient(120deg, rgba(255,77,109,0.06), rgba(255,190,200,0.02));animation:slowDrift 18s infinite}
    .orb2{width:320px;height:320px;right:8%;top:30%;background:linear-gradient(120deg, rgba(90,160,255,0.04), rgba(200,230,255,0.02));animation:slowDrift 22s infinite}
    @keyframes drift{0%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-48%) translateY(12px)}100%{transform:translateX(-50%) translateY(0)}}
    @keyframes slowDrift{0%{transform:translateY(0)}50%{transform:translateY(-18px)}100%{transform:translateY(0)}}

    /* string lights / subtle bokeh moving */
    .lights{position:absolute;left:0;right:0;top:6%;height:140px;pointer-events:none;opacity:0.12}
    .lights::before{content:"";position:absolute;left:10%;width:6px;height:6px;border-radius:50%;background:rgba(255,230,200,0.6);box-shadow:80vw 0 10px rgba(255,200,200,0.3);filter:blur(2px);animation:twinkle 6s infinite}
    @keyframes twinkle{0%{opacity:0.4}50%{opacity:1}100%{opacity:0.4}}

    /* Page layout */
    .wrap{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;z-index:2}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));backdrop-filter:blur(6px);border-radius:18px;padding:26px;max-width:880px;width:100%;box-shadow:0 10px 40px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.04);color:#eaf2ff}
    header{display:flex;align-items:center;gap:14px}
    .title{font-size:26px;margin:0}
    .sub{color:var(--muted);font-size:14px;margin-top:6px}

    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:18px}
    .left{padding-right:8px}
    .date-list{display:flex;flex-direction:column;gap:10px}
    .date-card{background:rgba(255,255,255,0.02);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:transform .18s ease, box-shadow .18s}
    .date-card:hover{transform:translateY(-4px);box-shadow:0 8px 24px rgba(0,0,0,0.5)}
    .date-card.selected{outline:3px solid rgba(255,77,109,0.12)}

    .muted{color:var(--muted);font-size:13px}
    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#d7e6f8}

    .right{display:flex;flex-direction:column;align-items:center;gap:12px}
    .count{font-size:20px;font-weight:700;color:#fff}
    .message{margin-top:12px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);color:#eaf2ff}
    footer{margin-top:14px;text-align:center;color:var(--muted);font-size:13px}

    /* subtle floating hearts (small, low-opacity) */
    .heart { position:fixed; bottom:-30px; width:18px; height:18px; transform:rotate(45deg); background:rgba(255,77,109,0.12); pointer-events:none; border-radius:2px }
    .heart::before, .heart::after{content:'';position:absolute;width:18px;height:18px;border-radius:50%;background:rgba(255,77,109,0.12)}
    .heart::before{top:-9px;left:0}
    .heart::after{left:-9px;top:0}
    @keyframes floatUpSubtle { 0%{transform:translateY(0) rotate(45deg) scale(1);opacity:0.18} 100%{transform:translateY(-110vh) rotate(45deg) scale(0.85);opacity:0} }

    /* small screen adjustments */
    @media(max-width:880px){ .grid{grid-template-columns:1fr} .right{order:-1} }
  </style>
</head>
<body>
  <div class="bg-wrap" aria-hidden="true">
    <div class="soft-spot"></div>
    <div class="glow-orb orb1"></div>
    <div class="glow-orb orb2"></div>
    <div class="lights"></div>
  </div>

  <div class="wrap">
    <div class="card" role="main">
      <header>
        <div>
          <h1 class="title"> LOML ðŸ’–</h1>
          <div class="sub">Hey <strong>Thandiwe Sithole</strong> â€” choose a date (Oct 27â€“31) and Iâ€™ll surprise you.</div>
        </div>
      </header>

      <div class="grid">
        <div class="left">
          <div class="date-list" id="dateList"></div>

          <div style="margin-top:14px;display:flex;gap:10px">
            <button id="randomBtn" class="btn ghost">Surprise me</button>
            <button id="askBtn" class="btn">Ask her now</button>
          </div>

          <div class="message" id="messageBox" aria-live="polite" style="display:none"></div>
        </div>

        <aside class="right">
          <div style="text-align:center;padding:12px;border-radius:12px;">
            <div class="count" id="countdown">Pick a date â†’ see countdown</div>
            <div class="muted">Time until the chosen date (Jo'burg timezone)</div>
          </div>
          <div style="width:100%;text-align:center">
            <button id="saveIcs" class="btn ghost">Save to calendar (.ics)</button>
          </div>
        </aside>
      </div>

      <footer>Made with â™¥ â€” choose a date, then press <strong>Ask her now</strong>.</footer>
    </div>
  </div>

  <script>
    // Dates config
    const YEAR = 2025;
    const TZ_OFFSET = '+02:00'; // Jo'burg
    const dates = [27,28,29,30,31].map(d => ({day:d, label:`Oct ${d}, ${YEAR}`}));

    // DOM refs
    const dateList = document.getElementById('dateList');
    const countdownEl = document.getElementById('countdown');
    const randomBtn = document.getElementById('randomBtn');
    const askBtn = document.getElementById('askBtn');
    const messageBox = document.getElementById('messageBox');
    const saveIcs = document.getElementById('saveIcs');

    let selected = null;

    function renderDates(){
      dateList.innerHTML = '';
      dates.forEach(dt => {
        const el = document.createElement('div');
        el.className = 'date-card';
        el.tabIndex = 0;
        el.innerHTML = `<div><strong>${dt.label}</strong><div class='muted'>Evening surprise â€” time will be set when confirmed</div></div><div class='muted'>Pick</div>`;
        el.addEventListener('click', ()=>selectDate(dt, el));
        el.addEventListener('keydown', (e)=>{ if(e.key==='Enter') selectDate(dt, el); });
        dateList.appendChild(el);
        dt.el = el;
      });
    }

    function selectDate(dt, el){
      if(selected && selected.el) selected.el.classList.remove('selected');
      selected = dt;
      el.classList.add('selected');
      beginCountdown(dt);
      messageBox.style.display='none';
    }

    function beginCountdown(dt){
      const target = new Date(`${YEAR}-10-${String(dt.day).padStart(2,'0')}T18:30:00${TZ_OFFSET}`);
      updateCountdown();
      if(window._cdInterval) clearInterval(window._cdInterval);
      window._cdInterval = setInterval(updateCountdown,1000);
      function updateCountdown(){
        const now = new Date();
        const diff = target - now;
        if(diff<=0){ countdownEl.textContent = `It's date time!`; clearInterval(window._cdInterval); return; }
        const days=Math.floor(diff/86400000); const hours=Math.floor((diff%86400000)/3600000); const mins=Math.floor((diff%3600000)/60000); const secs=Math.floor((diff%60000)/1000);
        countdownEl.textContent = `${days}d ${hours}h ${mins}m ${secs}s â€” ${dt.label} @ 18:30`;
      }
    }

    randomBtn.addEventListener('click', ()=>{
      const i = Math.floor(Math.random()*dates.length);
      selectDate(dates[i], dates[i].el);
      messageBox.style.display='block';
      messageBox.textContent = `Random pick: ${dates[i].label}. Looks like a plan!`;
    });

    askBtn.addEventListener('click', ()=>{
      if(!selected){ messageBox.style.display='block'; messageBox.textContent = 'Please choose a date (or press Surprise me).'; return; }
      messageBox.style.display='block';
      messageBox.innerHTML = `<strong>Ready.</strong> Sending your question...`;
      setTimeout(()=>{
        messageBox.innerHTML = `<h3 style="margin:6px 0 0">Thandiwe Sithole ðŸ’•, will you go on a panic date with me on ${selected.label}?</h3><p class='muted' style='margin:8px 0 0'>I promise fun, food and a little adventure â€” please say yes ðŸ’–</p><div style='margin-top:10px;display:flex;gap:8px;justify-content:flex-end'><button id='yesBtn' class='btn'>Say 'Yes' (for show)</button><button id='noBtn' class='btn ghost'>Maybe later</button></div>`;
        startConfetti();
        document.getElementById('yesBtn').addEventListener('click', ()=>{ messageBox.innerHTML = `<h3>She said YES! ðŸŽ‰</h3><p class='muted'>Saved to calendar? Click "Save to calendar" to add it to your events.</p>`; startConfetti(); });
        document.getElementById('noBtn').addEventListener('click', ()=>{ messageBox.innerHTML = `<h3>It's okay â€” try another date or surprise her later.</h3>`; stopConfetti(); });
      },900);
    });

    // ICS download
    saveIcs.addEventListener('click', ()=>{
      if(!selected){ messageBox.style.display='block'; messageBox.textContent = 'Pick a date first.'; return; }
      const dtStartIso = `${YEAR}-10-${String(selected.day).padStart(2,'0')}T18:30:00`;
      const dtEndIso = `${YEAR}-10-${String(selected.day).padStart(2,'0')}T20:30:00`;
      const uid = 'panic-date-'+Date.now();
      const ics = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//PanicDate//EN\nBEGIN:VEVENT\nUID:${uid}\nDTSTAMP:${formatIcsDate(new Date())}\nDTSTART:${formatIcsDate(new Date(dtStartIso))}\nDTEND:${formatIcsDate(new Date(dtEndIso))}\nSUMMARY:Panic Date with Thandiwe Sithole\nDESCRIPTION:It's our panic date â€” be ready for a surprise!\nEND:VEVENT\nEND:VCALENDAR`;
      const blob = new Blob([ics], {type:'text/calendar'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = `panic-date-${selected.label.replace(/\s/g,'_')}.ics`; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    function formatIcsDate(d){
      if(!(d instanceof Date)) d = new Date(d);
      const y = d.getUTCFullYear(); const m = String(d.getUTCMonth()+1).padStart(2,'0'); const day = String(d.getUTCDate()).padStart(2,'0'); const hh = String(d.getUTCHours()).padStart(2,'0'); const mm = String(d.getUTCMinutes()).padStart(2,'0'); const ss = String(d.getUTCSeconds()).padStart(2,'0');
      return `${y}${m}${day}T${hh}${mm}${ss}Z`;
    }

    // Tiny confetti for celebration
    let confettiInterval = null;
    function startConfetti(){
      // lightweight confetti (small hearts)
      const pieces = [];
      const canvas = document.createElement('canvas');
      canvas.className = 'confetti';
      canvas.style.position = 'fixed'; canvas.style.left=0; canvas.style.top=0; canvas.style.pointerEvents='none'; canvas.style.zIndex=9999; document.body.appendChild(canvas);
      const ctx = canvas.getContext('2d');
      function resize(){canvas.width = innerWidth; canvas.height = innerHeight}
      resize(); window.addEventListener('resize', resize);
      for(let i=0;i<80;i++){ pieces.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,vy:-2-Math.random()*4,vx:(Math.random()-0.5)*2,size:6+Math.random()*8,rot:Math.random()*360}); }
      confettiInterval = setInterval(()=>{
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for(const p of pieces){ p.x += p.vx; p.y += p.vy; p.rot += 4; if(p.y < -30){ p.y = canvas.height + 20; p.x = Math.random()*canvas.width; }
          ctx.save(); ctx.translate(p.x,p.y); ctx.rotate((p.rot*Math.PI)/180); ctx.fillStyle = 'rgba(255,77,109,0.9)'; ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size*0.6); ctx.restore(); }
      },30);
      setTimeout(()=>{ stopConfetti(); canvas.remove(); },7000);
    }
    function stopConfetti(){ if(confettiInterval) clearInterval(confettiInterval); }

    // subtle floating hearts generator
    function spawnHeart(){ const h = document.createElement('div'); h.className='heart'; h.style.left = (5 + Math.random()*90) + 'vw'; h.style.width = (10 + Math.random()*18) + 'px'; h.style.height = h.style.width; h.style.bottom = (-20 - Math.random()*20) + 'px'; h.style.opacity = 0.08 + Math.random()*0.22; const dur = 5 + Math.random()*8; h.style.animation = `floatUpSubtle ${dur}s linear forwards`; document.body.appendChild(h); setTimeout(()=>{ h.remove(); }, (dur+0.3)*1000); }
    setInterval(spawnHeart, 350);

    // init
    renderDates();
    document.addEventListener('keydown', (e)=>{ if(e.key==='?') alert('Choose a date and press Ask her now â€” good luck!'); });
  </script>
</body>
</html>
